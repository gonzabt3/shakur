(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"89LA":function(a,e,i){(a.exports=i("I1BE")(!1)).push([a.i,".border-right-20[data-v-dcaa5ac6]{border-right-width:20px}.sizeLoading[data-v-dcaa5ac6]{width:30px}",""])},"8QYR":function(a,e,i){"use strict";i.r(e);var t={components:{vSelect:()=>i.e(18).then(i.t.bind(null,"Snq/",7)),ModalAvatar:()=>i.e(9).then(i.bind(null,"+5g0"))},data:()=>({croppa:{},opcionesMaterias:[],opcionesUniversidades:[],opcionesCarreras:[],idCarrera:null,blobFile:null,data:{name:"",apellido:"",alias:"",universidad:null,carrera_id:null,materias:null,avatar_url:""},materias2:[],materias2contador:0,checkedAlias:!0,loading:!1,disabledButton:!1,textButton:"Guardar",iconLoading:!1,urlCarrera:"",urlMaterias:""}),beforeMount(){},watch:{checkedAlias(a){a||(this.data.alias="")},loading:function(a){a?(this.disabledButton=!0,this.textButton="",this.iconLoading=!0):(this.disabledButton=!1,this.textButton="Guardar",this.iconLoading=!1)},"data.universidad":function(a){this.data.carrera_id=null,null!=a&&(this.data.materias=null,this.urlCarrera="api/carreras/"+a,this.getValuesSelectCarrera())},"data.carrera_id":function(a){null!=a&&(0!=this.materias2contador&&(this.materias2=[]),this.materias2contador=1,this.data.materias=null,this.urlMaterias="api/materias/"+a,this.getMaterias())}},methods:{avatarModal(){this.$root.$emit("bv::show::modal","modalAvatar")},getInfoUser(){this.axios.get("api/usuario").then(a=>{let e=a.data;this.idCarrera=e.carrera_id,this.data.name=e.name,this.data.apellido=e.apellido,this.data.alias=e.alias,this.data.avatar_url=e.avatar_url,this.materias2=e.materias,null==this.data.alias&&(this.checkedAlias=!1),this.getValuesSelectUniversidad(e.universidad.id),this.urlCarrera="api/carreras/"+e.universidad.id,this.getValuesSelectCarrera(e.carrera_id)})},setMaterias(a){let e=[];_.map(a,a=>{e.push({label:a.materia,value:a.id})}),this.data.materias=e},getMaterias(a=null){console.log("getmaterias= "+a),this.opcionesMaterias=[],this.axios.get(this.urlMaterias).then(e=>{_.map(e.data,a=>{console.log(a.materia),this.opcionesMaterias.push({label:a.materia,value:a.id})}),null==a&&this.materias2==[]||(this.materias2!=[]&&(a=this.materias2),console.log(a),this.setMaterias(a))})},getValuesSelectUniversidad(a=null){this.opcionesUniversidades=[],this.axios.get("api/universidades").then(e=>{_.map(e.data,a=>{this.opcionesUniversidades.push({id:a.id,description:a.nombre})});this.error="",null!=a&&(this.data.universidad=a)}).catch(a=>{this.error="Ocurrió un error al llenar los valores de este selector"})},getValuesSelectCarrera(a=null){this.opcionesCarreras=[],this.axios.get(this.urlCarrera).then(e=>{let i=_.map(e.data,a=>({id:a.id,description:a.nombre}));this.opcionesCarreras=_.union(this.opcionesCarreras,i),this.error="",null!=a&&(this.data.carrera_id=a)}).catch(a=>{this.error="Ocurrió un error al llenar los valores de este selector"})},async submit(){this.loading=!0;let a=new FormData;this.blobFile=await this.blobToFile();let e=new File([this.blobFile],"name",{type:"image/png",lastModified:Date()});a.append("name",this.data.name),a.append("apellido",this.data.apellido),a.append("avatar_file",e),a.append("alias",this.data.alias),a.append("carrera_id",this.data.carrera_id),a.append("materias",JSON.stringify(this.data.materias)),this.axios.post("api/usuario/config",a).then(a=>{this.loading=!1,this.$refs.configUser.hide(),this.$notify({group:"foo",title:"Configuracion guardada",type:"success"}),window.location.reload()}),this.loading=!1},onInit(){this.croppa.addClipPlugin(function(a,e,i,t,r){a.beginPath(),a.arc(e+t/2,i+r/2,t/2,0,2*Math.PI,!0),a.closePath()})},blobToFile(){return this.croppa.promisedBlob("image/png",.8)}}},r={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("b-container",{attrs:{fluid:""}},[t("b-modal",{ref:"configUser",attrs:{id:"configUser",title:"Configuracion usuario"},on:{show:function(e){return a.getInfoUser()}}},[t("b-row",[t("b-col",{attrs:{cols:"12"}},[t("b-row",[t("b-col",{attrs:{cols:"4"}}),a._v(" "),t("b-col",[t("b-form-group",[t("croppa",{staticClass:"c1",attrs:{alt:"Thumbnail",width:100,height:100,"image-border-radius":50,"canvas-color":"#e6e6e6",placeholder:"Selecciona una imagen","placeholder-font-size":8,"prevent-white-space":""},on:{init:a.onInit},model:{value:a.croppa,callback:function(e){a.croppa=e},expression:"croppa"}},[t("img",{attrs:{slot:"initial",src:a.data.avatar_url},slot:"initial"})])],1)],1)],1),a._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"alias",label:"Alias:","label-for":"alias"}})],1),a._v(" "),t("b-col",{attrs:{cols:"7"}},[t("b-form-input",{attrs:{id:"alias",placeholder:"Ingrese alias",disabled:!a.checkedAlias},model:{value:a.data.alias,callback:function(e){a.$set(a.data,"alias",e)},expression:"data.alias"}})],1),a._v(" "),t("b-col",[t("b-form-checkbox",{model:{value:a.checkedAlias,callback:function(e){a.checkedAlias=e},expression:"checkedAlias"}})],1)],1),a._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"nombre",label:"Nombre:","label-for":"nombre"}})],1),a._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"nombre",placeholder:"Ingrese Nombre"},model:{value:a.data.name,callback:function(e){a.$set(a.data,"name",e)},expression:"data.name"}})],1)],1),a._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"apellido",label:"Apellido:","label-for":"apellido"}})],1),a._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"apellido",placeholder:"Ingrese apellido"},model:{value:a.data.apellido,callback:function(e){a.$set(a.data,"apellido",e)},expression:"data.apellido"}})],1)],1)],1),a._v(" "),t("b-col",[t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"Universiad",label:"Univeridad:","label-for":"universidad"}})],1),a._v(" "),t("b-col",[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":a.errors.has("universidad")},attrs:{id:"universidad",options:a.opcionesUniversidades,name:"universidad","text-field":"description","value-field":"id"},model:{value:a.data.universidad,callback:function(e){a.$set(a.data,"universidad",e)},expression:"data.universidad"}},[t("option",{attrs:{disabled:""},domProps:{value:null}},[a._v("Selecciona un opcion")])])],1)],1),a._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"carrera",label:"Carrera:","label-for":"carreras"}})],1),a._v(" "),t("b-col",[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":a.errors.has("carrera")},attrs:{id:"carrera",options:a.opcionesCarreras,name:"carrera","text-field":"description","value-field":"id"},model:{value:a.data.carrera_id,callback:function(e){a.$set(a.data,"carrera_id",e)},expression:"data.carrera_id"}},[t("option",{attrs:{disabled:""},domProps:{value:null}},[a._v("Selecciona un opcion")])])],1)],1),a._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"materias",label:"Materias en curso:","label-for":"materias"}})],1),a._v(" "),t("b-col",[t("v-select",{attrs:{options:a.opcionesMaterias,multiple:"",placeholder:"Elegi las materias","input-id":"materias",name:"materias"},model:{value:a.data.materias,callback:function(e){a.$set(a.data,"materias",e)},expression:"data.materias"}},[t("template",{slot:"no-options"},[t("span",[a._v("No se encontraron resultados")])])],2)],1)],1)],1)],1),a._v(" "),t("template",{slot:"modal-footer"},[t("button",{staticClass:"btn btn-success btn-block",attrs:{disabled:a.disabledButton,type:"submit"},on:{click:a.submit}},[t("img",{directives:[{name:"show",rawName:"v-show",value:a.iconLoading,expression:"iconLoading"}],staticClass:"sizeLoading",attrs:{src:i("kotZ")}}),a._v("\n                    "+a._s(a.textButton))])])],2),a._v(" "),t("modal-avatar")],1)},staticRenderFns:[]};var s=i("H/SE")(t,r,!1,function(a){i("PMGF")},"data-v-dcaa5ac6",null);e.default=s.exports},PMGF:function(a,e,i){var t=i("89LA");"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);i("SZ7m")("1722a840",t,!0,{})},kotZ:function(a,e){a.exports="/images/loadingWhite.svg?bf114a48be96b3b634b75a06b0a58af9"}}]);