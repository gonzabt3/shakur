(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"7UfZ":function(a,e,t){(a.exports=t("I1BE")(!1)).push([a.i,".border-right-20[data-v-71c98c33]{border-right-width:20px}.sizeLoading[data-v-71c98c33]{width:30px}",""])},"7jV7":function(a,e,t){"use strict";t.d(e,"a",function(){return i});var i=["topus","verga","pija","choto","poronga","putos","porongo","puta","idiota","concha","conchuda","conchudo","mogolico","puto","pito","chota","gadorcha","gonzaputo","chupa un huevo"]},"8QYR":function(a,e,t){"use strict";t.r(e);var i=t("7jV7");var r={components:{vSelect:()=>t.e(24).then(t.t.bind(null,"Snq/",7)),ModalAvatar:()=>t.e(11).then(t.bind(null,"+5g0")),Faltante:()=>t.e(4).then(t.bind(null,"aaVR"))},props:["noCerrar"],data:()=>({badWordApellidoFlag:"false",badWordNameFlag:"false",badWordAliasFlag:"false",error:"",croppa:{},opcionesMaterias:[],opcionesUniversidades:[],opcionesCarreras:[],idCarrera:null,blobFile:null,data:{name:"",apellido:"",alias:"",universidad:null,carrera_id:null,materias:null,avatar_url:""},materias2:[],materias2contador:0,checkedAlias:!0,loading:!1,disabledButton:!1,textButton:"Guardar",iconLoading:!1,urlCarrera:"",urlMaterias:""}),beforeMount(){},computed:{hasErrors(){return""!=this.error}},watch:{checkedAlias(a){a||(this.data.alias="")},loading:function(a){a?(this.disabledButton=!0,this.textButton="",this.iconLoading=!0):(this.disabledButton=!1,this.textButton="Guardar",this.iconLoading=!1)},"data.universidad":function(a){this.data.carrera_id=null,null!=a&&(this.data.materias=null,this.urlCarrera="api/carreras/"+a,this.getValuesSelectCarrera())},"data.carrera_id":function(a){null!=a&&(0!=this.materias2contador&&(this.materias2=[]),this.materias2contador=1,this.data.materias=null,this.urlMaterias="api/materias/"+a,this.getMaterias())},"data.materias":function(a){this.disabledButton=!(a.length>0)},"data.name":function(a){this.badWordNameFlag=this.scanMalasPalabras(a),0==this.badWordNameFlag&&(this.error="")},"data.apellido":function(a){this.badWordApellidoFlag=this.scanMalasPalabras(a),0==this.badWordApellidoFlag&&(this.error="")},"data.alias":function(a){this.badWordAAliasFlag=this.scanMalasPalabras(a),0==this.badWordAAliasFlag&&(this.error="")}},methods:{scanMalasPalabras:a=>0==!a.trim().split(" ").filter(a=>i.a.includes(a)).length,avatarModal(){this.$root.$emit("bv::show::modal","modalAvatar")},getInfoUser(){this.axios.get("api/usuario").then(async a=>{let e=a.data;this.idCarrera=e.carrera_id,this.data.name=e.name,this.data.apellido=e.apellido,this.data.alias=e.alias,this.data.avatar_url=e.avatar_url,this.materias2=e.materias,this.badWordApellidoFlag=!1,this.badWordNameFlag=!1,this.badWordAliasFlag=!1,null!=this.data.alias&&"null"!=this.data.alias||(this.checkedAlias=!1),await this.getValuesSelectUniversidad(e.universidad.id),this.urlCarrera="api/carreras/"+e.universidad.id,this.getValuesSelectCarrera(e.carrera_id)})},setMaterias(a){let e=[];_.map(a,a=>{e.push({label:a.materia,value:a.id})}),this.data.materias=e},getMaterias(a=null){this.opcionesMaterias=[],this.axios.get(this.urlMaterias).then(e=>{_.map(e.data,a=>{this.opcionesMaterias.push({label:a.materia,value:a.id})}),null==a&&this.materias2==[]||(this.materias2!=[]&&(a=this.materias2),this.setMaterias(a))})},getValuesSelectUniversidad(a=null){this.opcionesUniversidades=[],this.axios.get("api/universidades").then(e=>{_.map(e.data,a=>new Promise(e=>{e(this.opcionesUniversidades.push({id:a.id,description:a.nombre}))}));this.error="",null!=a&&(this.data.universidad=a)}).catch(a=>{this.error="Ocurrió un error al llenar los valores de este selector"})},getValuesSelectCarrera(a=null){this.opcionesCarreras=[],this.axios.get(this.urlCarrera).then(e=>{let t=_.map(e.data,a=>({id:a.id,description:a.nombre}));this.opcionesCarreras=_.union(this.opcionesCarreras,t),this.error="",null!=a&&(this.data.carrera_id=a)}).catch(a=>{this.error="Ocurrió un error al llenar los valores de este selector"})},async submit(){if(0==this.badWordApellidoFlag&&0==this.badWordNameFlag&&0==this.badWordAliasFlag){this.loading=!0;let a=new FormData;this.blobFile=await this.blobToFile();let e=new File([this.blobFile],"name",{type:"image/png",lastModified:Date()});a.append("name",this.data.name),a.append("apellido",this.data.apellido),a.append("avatar_file",e),a.append("alias",this.data.alias),a.append("carrera_id",this.data.carrera_id),a.append("materias",JSON.stringify(this.data.materias)),this.axios.post("api/usuario/config",a).then(a=>{this.loading=!1,this.$refs.configUser.hide(),this.$notify({group:"foo",title:"Configuracion guardada",type:"success"}),window.location.reload()}),this.loading=!1}else this.error="Hemos detectado lenguaje ofensivo"},onInit(){this.croppa.addClipPlugin(function(a,e,t,i,r){a.beginPath(),a.arc(e+i/2,t+r/2,i/2,0,2*Math.PI,!0),a.closePath()})},blobToFile(){return this.croppa.promisedBlob("image/png",.8)}}},s={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("b-container",{attrs:{fluid:""}},[i("b-modal",{ref:"configUser",attrs:{"no-close-on-backdrop":a.noCerrar,"no-close-on-esc":a.noCerrar,"hide-header-close":a.noCerrar,id:"configUser",title:"Configuracion usuario"},on:{show:function(e){return a.getInfoUser()}}},[i("b-row",[i("b-col",{attrs:{cols:"12"}},[i("b-row",[i("b-col",{attrs:{cols:"4"}}),a._v(" "),i("b-col",[i("b-form-group",[i("croppa",{staticClass:"c1",attrs:{alt:"Thumbnail",width:100,height:100,"image-border-radius":50,"canvas-color":"#e6e6e6",placeholder:"Selecciona una imagen","placeholder-font-size":8,"prevent-white-space":""},on:{init:a.onInit},model:{value:a.croppa,callback:function(e){a.croppa=e},expression:"croppa"}},[i("img",{attrs:{slot:"initial",src:a.data.avatar_url},slot:"initial"})])],1)],1)],1),a._v(" "),i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"alias",label:"Alias:","label-for":"alias"}})],1),a._v(" "),i("b-col",{attrs:{cols:"7"}},[i("b-form-input",{attrs:{id:"alias",placeholder:"Ingrese alias",disabled:!a.checkedAlias},model:{value:a.data.alias,callback:function(e){a.$set(a.data,"alias",e)},expression:"data.alias"}})],1),a._v(" "),i("b-col",[i("b-form-checkbox",{model:{value:a.checkedAlias,callback:function(e){a.checkedAlias=e},expression:"checkedAlias"}})],1)],1),a._v(" "),i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"nombre",label:"Nombre:","label-for":"nombre"}})],1),a._v(" "),i("b-col",[i("b-form-input",{attrs:{id:"nombre",placeholder:"Ingrese Nombre"},model:{value:a.data.name,callback:function(e){a.$set(a.data,"name",e)},expression:"data.name"}})],1)],1),a._v(" "),i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"apellido",label:"Apellido:","label-for":"apellido"}})],1),a._v(" "),i("b-col",[i("b-form-input",{attrs:{id:"apellido",placeholder:"Ingrese apellido"},model:{value:a.data.apellido,callback:function(e){a.$set(a.data,"apellido",e)},expression:"data.apellido"}})],1)],1)],1),a._v(" "),i("b-col",[i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"Universiad",label:"Univeridad:","label-for":"universidad"}})],1),a._v(" "),i("b-col",[i("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":a.errors.has("universidad")},attrs:{id:"universidad",options:a.opcionesUniversidades,name:"universidad","text-field":"description","value-field":"id"},model:{value:a.data.universidad,callback:function(e){a.$set(a.data,"universidad",e)},expression:"data.universidad"}},[i("option",{attrs:{disabled:""},domProps:{value:null}},[a._v("Selecciona un opcion")])])],1)],1),a._v(" "),i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"carrera",label:"Carrera:","label-for":"carreras"}})],1),a._v(" "),i("b-col",[i("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":a.errors.has("carrera")},attrs:{id:"carrera",options:a.opcionesCarreras,name:"carrera","text-field":"description","value-field":"id"},model:{value:a.data.carrera_id,callback:function(e){a.$set(a.data,"carrera_id",e)},expression:"data.carrera_id"}},[i("option",{attrs:{disabled:""},domProps:{value:null}},[a._v("Selecciona un opcion")])])],1)],1),a._v(" "),i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("b-form-group",{attrs:{id:"materias",label:"Materias en curso:","label-for":"materias"}})],1),a._v(" "),i("b-col",[i("v-select",{attrs:{options:a.opcionesMaterias,multiple:"",placeholder:"Elegi las materias","input-id":"materias",name:"materias"},model:{value:a.data.materias,callback:function(e){a.$set(a.data,"materias",e)},expression:"data.materias"}},[i("template",{slot:"no-options"},[i("span",[a._v("No se encontraron resultados")])])],2),a._v(" "),i("faltante",{attrs:{tipo:"materia","id-padre":a.data.carrera_id}})],1)],1),a._v(" "),i("b-alert",{staticClass:"text-center",attrs:{show:a.hasErrors,variant:"danger"}},[a._v(a._s(a.error))])],1)],1),a._v(" "),i("template",{slot:"modal-footer"},[i("button",{staticClass:"btn btn-success btn-block",attrs:{disabled:a.disabledButton,type:"submit"},on:{click:a.submit}},[i("img",{directives:[{name:"show",rawName:"v-show",value:a.iconLoading,expression:"iconLoading"}],staticClass:"sizeLoading",attrs:{src:t("kotZ")}}),a._v("\n                    "+a._s(a.textButton))])])],2),a._v(" "),i("modal-avatar")],1)},staticRenderFns:[]};var o=t("H/SE")(r,s,!1,function(a){t("UC0s")},"data-v-71c98c33",null);e.default=o.exports},UC0s:function(a,e,t){var i=t("7UfZ");"string"==typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);t("SZ7m")("0a85a31d",i,!0,{})}}]);